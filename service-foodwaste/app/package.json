{
  "name": "service-foodwaste",
  "description": "Foodwaste service that handles both registrations, reporting and settings.",
  "version": "5.1.0",
  "main": "src/",
  "keywords": [
    "feathers"
  ],
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "ssh://git@bitbucket.esmiley.dk:7999/esr/service-foodwaste.git"
  },
  "engines": {
    "node": "~12.18.4"
  },
  "nyc": {
    "lines": 80,
    "include": [
      "src/**/*.js",
      "src/**/*.ts"
    ],
    "extension": [
      ".js",
      ".ts"
    ],
    "reporter": [
      "lcovonly"
    ],
    "sourceMap": true,
    "instrument": true
  },
  "scripts": {
    "make": "gulp",
    "make-test": "npm run make && npm test",
    "test": "npm run test-integration && npm run test-unit",
    "test-unit": "NODE_ENV=test nyc --reporter=text --reporter=text-summary mocha --opts ./test/mocha-unit.opts",
    "test-integration": "NODE_ENV=test nyc --reporter=text --reporter=text-summary mocha --opts ./test/mocha-integration.opts",
    "test-integration-single": "NODE_ENV=test nyc --reporter=text --reporter=text-summary mocha --opts ./test/mocha-integration-single.opts",
    "test-unit-no-cover": "NODE_ENV=test mocha --opts ./test/mocha-unit.opts",
    "test-integration-no-cover": "NODE_ENV=test mocha --opts ./test/mocha-integration.opts",
    "start": "gulp && MIGRATION_HOST=true MIGRATIONS_ACTION=migrate docker-compose up service-foodwaste",
    "scale": "MIGRATION_HOST=false docker-compose up --scale service-foodwaste=3 service-foodwaste",
    "gulp-start": "gulp start",
    "stop": "docker-compose stop",
    "translations-import": "gulp phraseapp:import",
    "translations-export": "gulp phraseapp:export",
    "restart": "npm stop && npm run init-env",
    "init-env": "node_modules/.bin/init-env foodwaste foodwaste_migration && echo '*** Starting the service...' && npm start",
    "init-env-clean": "npm run stop-redis-clean && npm run stop-postgres-clean && npm run init-env",
    "init-env-clean-redis": "npm run stop-redis-clean && npm run init-env",
    "init-env-clean-pg": "npm run stop-postgres-clean && npm run init-env",
    "init-db": "../adhoc/init-dev-db.sh",
    "init-test-db": "DBNAME=foodwaste_test npm run init-db",
    "start-dbs": "npm run start-postgres && npm run start-redis",
    "start-postgres": "docker-compose up -d postgres",
    "stop-postgres": "docker stop service-postgres",
    "stop-postgres-clean": "npm run stop-postgres && docker rm service-postgres && docker rm service-postgres-data",
    "start-redis": "docker-compose up -d redis",
    "stop-redis": "docker stop service-redis",
    "stop-redis-clean": "npm run stop-redis && docker rm service-redis && docker rm service-redis-data",
    "start-traefik": "docker-compose up -d traefik",
    "stop-traefik": "docker stop traefik",
    "rollback": "gulp && MIGRATIONS_ACTION=rollback docker-compose up service-foodwaste",
    "create-migration": "sequelize migration:create --migrations-path migrations/migrations --name",
    "build-and-push": "SERVICE_NAME=service-foodwaste REQUIRE_VALID_HASH=0 node_modules/.bin/build-and-push",
    "retag-image": "SERVICE_NAME=service-foodwaste node_modules/.bin/retag-image",
    "release-and-tag": "node_modules/.bin/release-and-tag",
    "deploy-upgrade": "RANCHER_SERVICE_NAME=foodwaste REQUIRE_VALID_HASH=0 node_modules/.bin/upgrade-and-migrate",
    "version": "node node_modules/.bin/version",
    "clean-node-modules": "[[ `which jq` ]] && for f in `jq -r '.dependencies | to_entries[] | select(.value | contains(\"7999\")) | .key' < package.json`; do rm -fr node_modules/$f; done || echo 'Install command jq'",
    "clean": "npm run clean-node-modules && npm i"
  },
  "dependencies": {
    "@feathersjs/configuration": "^4.5.8",
    "@feathersjs/errors": "^4.5.8",
    "@feathersjs/express": "^4.5.8",
    "@feathersjs/feathers": "^4.5.8",
    "@feathersjs/socketio": "^4.5.8",
    "commons-config-node": "git+ssh://git@bitbucket.esmiley.dk:7999/esr/commons-config-node.git#v5.1",
    "compression": "^1.7.0",
    "cors": "~2.8.1",
    "csv-parse": "^1.2.1",
    "fast-json-patch": "^3.0.0-1",
    "feathers-commons-esmiley": "git+ssh://git@bitbucket.esmiley.dk:7999/esr/feathers-commons-esmiley.git#v5.1",
    "feathers-hooks-common": "^5.0.4",
    "feathers-hooks-esmiley": "git+ssh://git@bitbucket.esmiley.dk:7999/esr/feathers-hooks-esmiley.git#v3.1",
    "feathers-middlewares-esmiley": "git+ssh://git@bitbucket.esmiley.dk:7999/esr/feathers-middlewares-esmiley.git#v3.0",
    "feathers-sequelize": "^2.4.0",
    "lodash": "~4.17.4",
    "moment": "^2.29.0",
    "moment-timezone": "^0.5.23",
    "moment-weekday-calc": "^1.1.3",
    "multer": "^1.4.2",
    "node-cron": "^2.0.3",
    "node-logger-esmiley": "git+ssh://git@bitbucket.esmiley.dk:7999/esr/node-logger-esmiley.git#v2.0",
    "node-xlsx": "^0.15.0",
    "redlock": "^3.1.2",
    "schemas": "git+ssh://git@bitbucket.esmiley.dk:7999/esr/schemas.git#v3.12",
    "uuid": "^8.3.0"
  },
  "devDependencies": {
    "@types/lodash": "^4.14.116",
    "@types/node": "^14.11.1",
    "chai": "^4.1.0",
    "chai-http": "^3.0.0",
    "chai-subset": "^1.3.0",
    "chakram": "^1.5.0",
    "gulp": "^4.0.2",
    "gulp-nodemon": "^2.2.1",
    "gulp-phraseapp": "~1.1.2",
    "gulp-rename": "^2.0.0",
    "gulp-sourcemaps": "^2.6.4",
    "gulp-tslint": "^8.1.4",
    "gulp-typescript": "^5.0.1",
    "gulp-util": "^3.0.8",
    "mocha": "^3.5.3",
    "nodemon": "^2.0.4",
    "nyc": "^15.1.0",
    "proxyquire": "^2.1.3",
    "sinon": "^9.0.3",
    "source-map-support": "^0.5.19",
    "tslint": "^6.1.3",
    "tslint-eslint-rules": "^5.4.0",
    "typescript": "^4.0.3"
  },
  "directories": {
    "lib": "src",
    "test": "test",
    "config": "config"
  },
  "author": "eSmiley A/S",
  "homepage": "https://www.esmiley.com"
}
